var artikeldetailseite=function(e){var t={};function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)n.d(r,u,function(t){return e[t]}.bind(null,u));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=thaliaShell},function(e,t){document.addEventListener("DOMContentLoaded",(function(){if(void 0!==window.thaliaShell){var e=window.thaliaShell.errorlogging,t=document.querySelector("[data-error-logging='artikeldetailseite']");if(null!==t){var n={name:"artikeldetailseite",release:"artikeldetailseite@"+t.dataset.version,dsn:"https://f9f134a052964774846f54890157e6d8@sentry.thalia.de/17",filenameRegex:[/.*artikeldetailseite.*\.js/]};e.register(n)}}}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"bewertungen",(function(){return o}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageSize=3;var t=document.getElementById("kundenbewertungActions");if(null==t)return this.curAnzahlBewertungen=0,void(this.totaleAnzahlBewertungen=0);this.url=t.getAttribute("url-bewertungen"),this.totaleAnzahlBewertungen=parseInt(t.getAttribute("totale-anzahl-bewertungen")),this.initAnzahlBewertungen=parseInt(t.getAttribute("initial-anzahl-bewertungen")),this.curAnzahlBewertungen=this.initAnzahlBewertungen,this.naechsteSeite=1}var t,n,u;return t=e,(n=[{key:"init",value:function(){var e=this;0!==this.totaleAnzahlBewertungen&&(this.curAnzahlBewertungen>=this.totaleAnzahlBewertungen&&document.getElementById("moreButton").classList.add("hide"),document.getElementById("moreButton").addEventListener("click",(function(){e.getMoreBewertungen()})),document.getElementById("lessButton").addEventListener("click",(function(){e.getLessBewertungen()})),this.naechsteSeite=parseInt(document.getElementById("bewertungen-nachladen").getAttribute("next-page")))}},{key:"getMoreBewertungen",value:function(){var e=this,t=document.getElementById("bewertungen-nachladen"),n=t.getAttribute("bewertungen-uri")+"?page="+this.naechsteSeite;fetch(n).then((function(n){n.ok?n.text().then((function(n){if(0!==n.trim().length){t.outerHTML=n;var r=document.getElementById("bewertungen-nachladen");r.scrollIntoView(!1),e.curAnzahlBewertungen=document.querySelectorAll("#kundenbewertungListe .entry").length,e.curAnzahlBewertungen>=e.totaleAnzahlBewertungen&&document.getElementById("moreButton").classList.add("hide"),document.getElementById("lessButton").classList.remove("hide"),e.naechsteSeite=r.getAttribute("next-page")}else e.kundenbewertungenFehler()})):e.kundenbewertungenFehler()})).catch((function(){e.kundenbewertungenFehler()}))}},{key:"kundenbewertungenFehler",value:function(){document.getElementById("lessButton").classList.add("hide"),document.getElementById("moreButton").classList.add("hide")}},{key:"getLessBewertungen",value:function(){for(var e=document.querySelectorAll("#kundenbewertungListe .entry"),t=e.length,n=t%this.pageSize,r=n>0?n:this.pageSize,u=0;u<r;u++){var a=e[t-1-u];a.parentNode&&a.parentNode.removeChild(a),this.curAnzahlBewertungen--}this.naechsteSeite--,this.curAnzahlBewertungen<=this.pageSize&&document.getElementById("lessButton").classList.add("hide"),this.curAnzahlBewertungen>=this.totaleAnzahlBewertungen?document.getElementById("moreButton").classList.add("hide"):document.getElementById("moreButton").classList.remove("hide")}},{key:"ladeBuchhaendlerBewertungen",value:function(){var e=document.getElementById("buchhaendlerbewertungen-nachladen"),t=e.getAttribute("buchhaendlerbewertungen-uri")+"?page="+e.getAttribute("next-page");fetch(t,{method:"GET"}).then((function(t){t.ok?t.text().then((function(t){e.outerHTML=t,document.getElementById("buchhaendlerbewertungen-nachladen").scrollIntoView(!1)})):e.remove()})).catch((function(){e.remove()}))}},{key:"entferneBuchhaendlerBewertungen",value:function(){var e=document.getElementById("buchhaendlerbewertungen-more"),t=document.getElementById("buchhaendlerbewertungen-less"),n=document.getElementById("buchhaendlerbewertungen-nachladen");n.setAttribute("next-page",n.getAttribute("next-page")-1);var r=document.getElementsByClassName("otBooksellerTip"),u=r.length;u%2>0?r[u-1].remove():(r[u-1].remove(),r[u-2].remove()),e.classList.remove("hide"),2===r.length&&t.classList.add("hide")}}])&&r(t.prototype,n),u&&r(t,u),e}(),a=n(0);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"kategoriepfadname",value:function(){for(var e=document.querySelectorAll('nav[component="artikeldetails-bereich"] li a'),t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.textContent.trim())}return t}},{key:"filialabholungAngezeigt",value:function(){return null!==document.getElementById("filialabholungsbox")}},{key:"safeTrim",value:function(e){return"string"==typeof e?e.trim():e}},{key:"autoren",value:function(){for(var e=document.querySelectorAll(".aim-author a"),t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.textContent.trim())}return t}},{key:"parseInteger",value:function(e){if("string"!=typeof e)return null;var t=parseInt(e);return t!=t?null:t}},{key:"parseFloat",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if("string"!=typeof e)return null;var t=parseFloat(e);return t!=t?null:t}))},{key:"preisOhneTrenner",value:function(e){return"string"!=typeof e?null:this.parseInteger(e.replace(".",""))}},{key:"getDataSupplier",value:function(){var e=this;return function(){return new Promise((function(t){var n={},r=document.getElementById("sbe-product-details");if(null!==r){var u=r.dataset;n.produktTitel=e.safeTrim(u.titel);var a=e.parseFloat(u.preisNetto);null!==a&&(n.verkaufspreisnetto=a);var i=e.parseFloat(u.preisBrutto);null!==i&&(n.verkaufspreisbrutto=i),n.seitenTyp="produkt",n.mandant=e.parseInteger(u.mandant),n.environment=u.environment,n.livesystem="prod"===u.environment?1:0,n.ean=u.ean,n.id=u.id,n.idAlt=u.idAlt,n.hersteller=e.safeTrim(u.hersteller),n.form=u.form,n.shopid=parseInt(u.shopid);var l=e.parseInteger(u.verkaufsrang);null!==l&&(n.verkaufsrang=l);var o=e.parseInteger(u.anzahlbewertungen);null!==o&&(n.anzahlbewertungen=o);var s=e.parseFloat(u.durchschnittsbewertung);null!==s&&o>0&&(n.durchschnittsbewertung=s),n.verfuegbarkeit=e.safeTrim(u.verfuegbarkeit),n.preisbindung="true"===u.preisbindung,n.artikelreduziert="true"===u.reduziert}n.produktAutor=e.autoren(),n.kategoriepfadname=e.kategoriepfadname(),n.anzeigeFilialabholungsWidget=e.filialabholungAngezeigt(),t(n)}))}}},{key:"register",value:function(){a.datalayer.pageObject.register(this.getDataSupplier())}}])&&i(t.prototype,n),r&&i(t,r),e}(),o=(n(1),new u);o.init(),(new l).register()}]);
//# sourceMappingURL=artikeldetailseite.js.map